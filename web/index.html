<!DOCTYPE html>
<html>
<head>
    <title>Gin WebSocket Example</title>
    <style>
        body {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            font-family: Arial, sans-serif;
        }

        #messages {
            border: 1px solid #ccc;
            height: 300px;
            margin-bottom: 10px;
            overflow-y: scroll;
            padding: 10px;
        }

    </style>
</head>
<body>
<h1>Logs</h1>
<div id="messages"></div>

<script>
    let ws;
    const messagesDiv = document.getElementById('messages');

    function connect() {
        // Create WebSocket connection
        ws = new WebSocket('ws://localhost:8080/ws');

        // Connection opened
        ws.onopen = function (e) {
            addMessage('System', 'Connection established');
        };

        // Listen for messages
        ws.onmessage = function (e) {
            addMessage('Server', e.data);
        };

        // Connection closed
        ws.onclose = function (e) {
            addMessage('System', 'Connection closed');
            // Try to reconnect after 1 second
            setTimeout(connect, 1000);
        };

        // Connection error
        ws.onerror = function () {
            addMessage('System', 'Error occurred');
        };
    }

    function addMessage(sender, message) {
        const messageElement = document.createElement('div');
        messageElement.innerHTML = `<strong>${sender}:</strong> ${message}`;
        messagesDiv.appendChild(messageElement);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    window.onload = connect;
</script>
</body>
</html>